<div style="padding:24px">
    <h2>Users List</h2>

    <div style="overflow-x:auto;">
        <table mat-table [dataSource]="dataSource" class="mat-elevation-z8" style="min-width:1200px">

            <!-- Dynamic data columns -->
            @for (col of columns; track col) {
            <ng-container [matColumnDef]="col">
                <th mat-header-cell *matHeaderCellDef>{{ col }}</th>
                <td mat-cell *matCellDef="let row">
                    <input matInput [(ngModel)]="row[col]" (keyup)="onCellChange(row, col)"
                        (click)="$event.stopPropagation()" />
                    <!-- stopPropagation prevents bubbling to row click -->
                </td>
            </ng-container>
            }

            <!-- Render rows -->
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="goToDetails(row)">
            </tr>
        </table>
    </div>

    <mat-paginator [pageSizeOptions]="[5, 10, 25, 50]" showFirstLastButtons></mat-paginator>
</div>